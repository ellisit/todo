var mysql = require('mysql');
var sessions = require('express-session');

var session; 
connection = function(email, password, callback){
	var connection = mysql.createConnection({
		host: "localhost",
		user: "root",
		password: "",
		database: "todolist"
	});
	console.log("SELECT * FROM users WHERE Name ='"+email+"' AND Password = '"+password+"'");
	connection.query("SELECT * FROM users WHERE Name ='"+email+"' AND Password = '"+password+"'", function (error, results, fields){
		if (error) throw error;
		if (results.length > 0) {
			callback(true);
		};
		callback(false);
	});
};


verification = function(email, password, callback){
		var connection = mysql.createConnection({
		host: "localhost",
		user: "root",
		password: "",
		database: "todolist"
	});
	
	connection.query("SELECT * FROM users WHERE Name ='"+email+"' AND Password = '"+password+"'", function (error, results, fields){
		if (error) throw error;
		if (results.length > 0) {
			callback(true);
		};
	callback(false);
	});

};

register = function(email, password){
	var connection = mysql.createConnection({
		host: "localhost",
		user: "root",
		password: "",
		database: "todolist"
	});
	connection.query("INSERT INTO users SET Name ='"+email+"', Password ='"+password+"'", function (error, results, fields){
	if (error) throw error;		
	});
};

userid = function(userID,callback){
	var connection = mysql.createConnection({
		host: "localhost",
		user: "root",
		password: "",
		database: "todolist"
	});
	connection.query("SELECT * users WHERE Name ='"+email+"' AND id ='"+userID+"'", function(req,res,field){
		session = req.session ;
		session.uniqueID = userID;
		callback(userID);
		if (error) throw error;
		
	});
};

remove = function(id){
	var connection = mysql.createConnection({
		host: "localhost",
		user: "root",
		password: "",
		database: "todolist"
	});
	connection.query("SELECT * users WHERE id ='"+id+"'")
		
}

exports.verification = verification;
exports.register = register;
exports.connection = connection;
//exports.userID = userID;